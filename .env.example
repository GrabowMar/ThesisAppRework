# ThesisAppRework Environment Configuration Example
# Copy this file to .env and customize as needed

# ============================================================================
# DATABASE
# ============================================================================
DATABASE_URL=sqlite:///./thesis_app.db

# ============================================================================
# TASK CLEANUP CONFIGURATION (NEW - November 2025)
# ============================================================================

# Enable/disable startup task cleanup (default: true)
# Set to 'false' in development to prevent task cancellation during restarts
STARTUP_CLEANUP_ENABLED=true

# Timeout for RUNNING tasks in minutes (default: 120 = 2 hours)
# Tasks stuck in RUNNING state longer than this will be marked as FAILED
STARTUP_CLEANUP_RUNNING_TIMEOUT=120

# Timeout for PENDING tasks in minutes (default: 240 = 4 hours)
# Tasks waiting in PENDING state longer than this will be CANCELLED
STARTUP_CLEANUP_PENDING_TIMEOUT=240

# Grace period in minutes (default: 5)
# Tasks created within this window are NEVER touched, even if they exceed timeouts
# Prevents false positives during rapid app restarts
STARTUP_CLEANUP_GRACE_PERIOD=5

# ============================================================================
# ANALYZER SERVICES
# ============================================================================
ANALYZER_ENABLED=true
ANALYZER_AUTO_START=false

# Service timeouts (seconds)
STATIC_ANALYSIS_TIMEOUT=1800
SECURITY_ANALYSIS_TIMEOUT=1800
PERFORMANCE_TIMEOUT=1800
AI_ANALYSIS_TIMEOUT=2400

# ============================================================================
# TASK RETRY CONFIGURATION (NEW - December 2025)
# ============================================================================

# Maximum retry attempts for pre-flight check failures (default: 3)
# When analyzer services are unavailable, tasks will be rescheduled up to this many times
PREFLIGHT_MAX_RETRIES=3

# Maximum retry attempts for transient failures (default: 3)
# Failed tasks due to service unavailability will be auto-recovered up to this many times
TRANSIENT_FAILURE_MAX_RETRIES=3

# ============================================================================
# AI ANALYZER
# ============================================================================
OPENROUTER_API_KEY=your_openrouter_api_key_here

# ============================================================================
# LOGGING
# ============================================================================
LOG_LEVEL=INFO

# ============================================================================
# FLASK
# ============================================================================
FLASK_ENV=development
FLASK_DEBUG=true
SECRET_KEY=your_secret_key_here

# ============================================================================
# PRESET CONFIGURATIONS
# ============================================================================

# Development (disable cleanup, prevent interruptions)
# STARTUP_CLEANUP_ENABLED=false

# Production (use defaults - conservative and safe)
# No env vars needed - defaults are already production-ready

# High-throughput (long queues expected)
# STARTUP_CLEANUP_RUNNING_TIMEOUT=180
# STARTUP_CLEANUP_PENDING_TIMEOUT=480
# STARTUP_CLEANUP_GRACE_PERIOD=10

# Aggressive cleanup (legacy behavior - NOT recommended)
# STARTUP_CLEANUP_RUNNING_TIMEOUT=30
# STARTUP_CLEANUP_PENDING_TIMEOUT=30
# STARTUP_CLEANUP_GRACE_PERIOD=0
