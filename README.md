# ThesisAppRework

A Flask-based platform for analyzing AI-generated applications. Evaluates code quality, security vulnerabilities, performance, and requirements compliance across multiple AI models.

## Features

- **Multi-Model Analysis** — Compare applications generated by OpenAI, Anthropic, and other AI providers
- **Comprehensive Testing** — Static analysis, security scanning, performance testing, and AI-powered code review
- **Containerized Analyzers** — Isolated Docker services for consistent, reproducible results
- **Real-time Progress** — WebSocket-based updates during analysis
- **SARIF Compliance** — Industry-standard security findings format
- **REST API** — Automation-friendly endpoints with Bearer token auth

## Architecture

```
┌─────────────────────────────────────────────────────────────┐
│                    Flask App (:5000)                        │
│         Routes • Services • Task Execution • DB             │
└─────────────────────────┬───────────────────────────────────┘
                          │ WebSocket
    ┌─────────────────────┼─────────────────────┐
    ▼                     ▼                     ▼
┌────────┐          ┌────────┐           ┌────────┐
│ Static │          │Dynamic │           │  Perf  │
│ :2001  │          │ :2002  │           │ :2003  │
└────────┘          └────────┘           └────────┘
  Bandit              ZAP                  Locust
  Semgrep             nmap                 aiohttp
  ESLint              curl                 ab
```

## Quick Start

### Prerequisites

- Python 3.10+
- Docker Desktop
- Git

### Setup

```bash
# Clone
git clone https://github.com/GrabowMar/ThesisAppRework.git
cd ThesisAppRework

# Virtual environment
python -m venv .venv
.venv\Scripts\Activate.ps1   # Windows
source .venv/bin/activate    # Linux/Mac

# Dependencies
pip install -r requirements.txt

# Configure
cp .env.example .env
# Edit .env with your OPENROUTER_API_KEY

# Initialize database
python src/init_db.py
```

### Run

```bash
# Interactive menu
./start.ps1

# Or specific modes:
./start.ps1 -Mode Start      # Full stack (Flask + Analyzers)
./start.ps1 -Mode Dev        # Flask only
./start.ps1 -Mode Status     # Dashboard
./start.ps1 -Mode Stop       # Stop all
```

Access at **http://localhost:5000**

### Run Analysis (CLI)

```bash
# Start analyzers
python analyzer/analyzer_manager.py start

# Run comprehensive analysis
python analyzer/analyzer_manager.py analyze openai_gpt-4 1 comprehensive

# Check status
python analyzer/analyzer_manager.py status
```

## Project Structure

```
ThesisAppRework/
├── src/                    # Flask application
│   ├── main.py            # Entry point
│   ├── app/               # Application package
│   │   ├── factory.py     # App factory
│   │   ├── models/        # Database models
│   │   ├── services/      # Business logic
│   │   ├── routes/        # Web routes
│   │   └── api/           # REST API
│   └── templates/         # Jinja2 templates
├── analyzer/              # Analyzer microservices
│   ├── analyzer_manager.py
│   ├── docker-compose.yml
│   └── services/          # Container services
├── generated/apps/        # AI-generated applications
├── results/               # Analysis results
├── tests/                 # Test suite
└── docs/                  # Documentation
```

## Testing

```bash
# Fast unit tests (recommended)
pytest -m "not integration and not slow and not analyzer"

# Smoke tests
pytest tests/smoke/

# All tests
pytest
```

VS Code: Open **Testing** panel (Ctrl+Shift+T) for interactive test explorer.

## API

All endpoints require Bearer token authentication.

```bash
# Create analysis task
curl -X POST http://localhost:5000/api/analysis/run \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json" \
  -d '{"model_slug": "openai_gpt-4", "app_number": 1, "analysis_type": "comprehensive"}'

# Check task status
curl http://localhost:5000/api/analysis/task/<task_id> \
  -H "Authorization: Bearer <token>"
```

Generate tokens via **User → API Access** in the web UI.

## Documentation

| Guide | Description |
|-------|-------------|
| [Quick Start](docs/QUICKSTART.md) | Installation and first steps |
| [Architecture](docs/ARCHITECTURE.md) | System design, components, data flow |
| [API Reference](docs/api-reference.md) | REST endpoints, authentication |
| [Analyzer Guide](docs/ANALYZER_GUIDE.md) | Static, dynamic, and AI analyzers |
| [Models Reference](docs/MODELS_REFERENCE.md) | Supported AI models |
| [Development Guide](docs/development-guide.md) | Setup, testing, contributing |
| [Deployment Guide](docs/deployment-guide.md) | Production deployment |
| [Troubleshooting](docs/TROUBLESHOOTING.md) | Common issues and solutions |

## Environment Variables

| Variable | Description | Required |
|----------|-------------|----------|
| `OPENROUTER_API_KEY` | AI analyzer API key | Yes |
| `SECRET_KEY` | Flask secret key | Yes (prod) |
| `ANALYZER_ENABLED` | Enable analyzers | No (default: true) |
| `LOG_LEVEL` | Logging level | No (default: INFO) |

## Tech Stack

- **Backend**: Flask, SQLAlchemy, SocketIO
- **Database**: SQLite
- **Containers**: Docker, Docker Compose
- **Analysis**: Bandit, Semgrep, ESLint, OWASP ZAP, Locust
- **Testing**: pytest
- **AI**: OpenRouter API

## License

MIT

## Contributing

1. Fork the repository
2. Create a feature branch (`git checkout -b feature/amazing-feature`)
3. Commit changes (`git commit -m 'feat: add amazing feature'`)
4. Push to branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request
