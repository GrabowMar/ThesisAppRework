{% if tasks and tasks|length > 0 %}
<div class="table-responsive">
  <table class="table table-sm table-striped table-vcenter card-table mb-0">
    <thead class="table-light">
      <tr>
        <th>ID</th>
        <th>Type</th>
        <th>Model</th>
        <th>App #</th>
        <th>Status</th>
        <th>Priority</th>
        <th>Created</th>
      </tr>
    </thead>
    <tbody>
      {% for t in tasks %}
      <tr>
        <td class="text-truncate" title="{{ t.task_id }}">{{ t.task_id }}</td>
        <td>{{ t.analysis_type.value if t.analysis_type else t.analysis_type }}</td>
        <td>{{ t.target_model }}</td>
        <td>{{ t.target_app_number }}</td>
        <td><span class="badge bg-secondary text-uppercase">{{ t.status.value if t.status else t.status }}</span></td>
        <td><span class="badge bg-info text-dark">{{ t.priority.value if t.priority else t.priority }}</span></td>
        <td class="small text-muted">{{ t.created_at.strftime('%Y-%m-%d %H:%M') if t.created_at else '' }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% else %}
<div class="p-4 text-center text-muted">No analysis tasks yet. <a href="/analysis/create">Create one</a>.</div>
{% endif %}
