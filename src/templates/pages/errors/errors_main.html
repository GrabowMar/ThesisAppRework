{#
  Error Pages Handler (standardized layout usage)
  Now uses the base layout's content block directly (no extra page wrapper divs)
#}
{% extends 'layouts/base_smart.html' %}

{% set page_title = (error_title or 'Error') %}

{% block content %}
  {# Header variables consumed by base layout #}
  {% set page_subtitle = error_subtitle %}
  {% set page_icon = error_icon %}
  {% if hide_header %}{% set hide_page_header = true %}{% endif %}

  <div class="row justify-content-center">
    <div class="col-lg-8 col-xl-6">
      <div class="card">
        <div class="card-body text-center py-5">
          <div class="mb-4">
            {% if error_code == 404 %}
              <i class="fas fa-search fa-4x text-muted"></i>
            {% elif error_code == 500 %}
              <i class="fas fa-exclamation-triangle fa-4x text-danger"></i>
            {% elif error_code == 503 %}
              <i class="fas fa-cogs fa-4x text-warning"></i>
            {% else %}
              <i class="fas fa-exclamation-circle fa-4x text-warning"></i>
            {% endif %}
          </div>

          <h1 class="h2 mb-3">
            {% if error_title %}
              {{ error_title }}
            {% elif error_code == 404 %}
              Page Not Found
            {% elif error_code == 500 %}
              Internal Server Error
            {% elif error_code == 503 %}
              Service Unavailable
            {% else %}
              Error
            {% endif %}
          </h1>

          <p class="text-muted mb-4">
            {% if error_message %}
              {{ error_message }}
            {% elif error_code == 404 %}
              The page you're looking for doesn't exist or has been moved.
            {% elif error_code == 500 %}
              Something went wrong on our end. Please try again later.
            {% elif error_code == 503 %}
              The service is temporarily unavailable. Please try again later.
            {% else %}
              An unexpected error occurred.
            {% endif %}
          </p>

          <div class="d-flex justify-content-center gap-2 flex-wrap">
            <a href="{{ url_for('main.dashboard') }}" class="btn btn-primary">
              <i class="fas fa-home me-2"></i>Go to Dashboard
            </a>
            <button onclick="history.back()" class="btn btn-ghost-secondary">
              <i class="fas fa-arrow-left me-2"></i>Go Back
            </button>
          </div>

          {% if error_code %}
          <div class="mt-4 pt-4 border-top">
            <small class="text-muted">
              Error Code: {{ error_code }}
              {% if python_version %}
              | Python Version: {{ python_version }}
              {% endif %}
              {% if request_id %}
              | Request ID: <code>{{ request_id }}</code>
              {% endif %}
            </small>
          </div>
          {% endif %}

          {% if debug and debug_info %}
          <div class="text-start mt-4">
            <div class="alert alert-warning" role="alert">
              <strong>Debug Information</strong> (visible only in debug mode)
            </div>
            <pre class="small bg-light p-3 rounded overflow-auto">
{% if debug_info.exception_type %}Exception: {{ debug_info.exception_type }}\n{% endif %}{% if debug_info.stacktrace %}{{ debug_info.stacktrace }}{% endif %}</pre>
          </div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
  {% endblock %}

{% block scripts %}
  {{ super() }}
  {# Error-specific scripts can be added here #}
{% endblock %}

