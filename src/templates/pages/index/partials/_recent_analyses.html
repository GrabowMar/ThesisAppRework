{% if analyses %}
<table class="table table-vcenter table-sm card-table table-ultra-compact mb-0">
  <thead>
    <tr>
      <th style="width: 60px">ID</th>
      <th>Type / App</th>
      <th style="width: 90px">Status</th>
      <th style="width: 80px" class="text-end">Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for analysis in analyses %}
    <tr>
      <td>
        <span class="text-muted">#{{ analysis.id }}</span>
      </td>
      <td>
        <div class="d-flex align-items-center gap-2">
          <span class="badge bg-{{ {'security':'red','performance':'azure','static':'purple','ai':'teal'}.get(analysis.category, 'secondary') }}-lt" style="font-size: 0.7rem; padding: 2px 6px;">{{ analysis.category[:4]|upper }}</span>
          <span class="text-muted" style="font-size: 0.8rem;">{% if analysis.application_id %}App #{{ analysis.application_id }}{% else %}â€”{% endif %}</span>
          <span class="text-muted ms-auto" style="font-size: 0.75rem;">{{ analysis.created_at.strftime('%m/%d %H:%M') if analysis.created_at else '' }}</span>
        </div>
      </td>
      <td>
        {% if analysis.status == 'completed' %}
          <span class="badge bg-success-lt text-success" style="font-size: 0.7rem;">Done</span>
        {% elif analysis.status == 'running' %}
          <span class="badge bg-info-lt text-info" style="font-size: 0.7rem;"><i class="fa-solid fa-spinner fa-spin"></i></span>
        {% elif analysis.status == 'pending' %}
          <span class="badge bg-warning-lt text-warning" style="font-size: 0.7rem;">Wait</span>
        {% elif analysis.status == 'failed' %}
          <span class="badge bg-danger-lt text-danger" style="font-size: 0.7rem;">Fail</span>
        {% else %}
          <span class="badge bg-secondary-lt" style="font-size: 0.7rem;">{{ analysis.status[:4]|title }}</span>
        {% endif %}
      </td>
      <td class="text-end">
        <a href="/analysis/{{ analysis.id }}" class="btn btn-sm btn-icon btn-ghost-primary py-0" title="View">
          <i class="fa-solid fa-eye" style="font-size: 0.75rem;"></i>
        </a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<div class="text-center py-3">
  <i class="fa-solid fa-flask text-muted mb-2" style="font-size: 1.5rem;"></i>
  <p class="text-muted mb-2" style="font-size: 0.85rem;">No analyses yet</p>
  <a href="{{ url_for('analysis.analysis_index') }}" class="btn btn-sm btn-primary">New Analysis</a>
</div>
{% endif %}