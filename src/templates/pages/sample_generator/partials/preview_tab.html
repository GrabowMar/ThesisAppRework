<!-- Step 3: Preview Request & Response -->
<div class="row g-4">
  <!-- Left Column: Request Preview -->
  <div class="col-lg-6">
    <div class="card h-100">
      <div class="card-header">
        <h3 class="card-title">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon me-2" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 6l6 6l-6 6" /></svg>
          Request to OpenRouter
        </h3>
        <div class="card-actions">
          <span class="badge bg-blue-lt" id="request-size-badge">0 tokens (est.)</span>
          <button class="btn btn-sm btn-icon" id="copy-request-btn" type="button" title="Copy request">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z" /><path d="M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2" /></svg>
          </button>
        </div>
      </div>
      <div class="card-body">
        <!-- Request Metadata -->
        <div class="card card-sm bg-blue-lt mb-3">
          <div class="card-body">
            <div class="row g-2 small">
              <div class="col-md-6">
                <div class="text-muted">Endpoint</div>
                <div class="fw-bold font-monospace">api.openrouter.ai/v1/chat/completions</div>
              </div>
              <div class="col-md-6">
                <div class="text-muted">Method</div>
                <div class="fw-bold">POST</div>
              </div>
              <div class="col-md-6">
                <div class="text-muted">Model</div>
                <div class="fw-bold" id="preview-request-model">—</div>
              </div>
              <div class="col-md-6">
                <div class="text-muted">Temperature</div>
                <div class="fw-bold" id="preview-request-temp">Dynamic</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Request Payload -->
        <div class="mb-2">
          <div class="d-flex justify-content-between align-items-center mb-2">
            <label class="form-label fw-bold mb-0">Request Payload</label>
            <div class="btn-group btn-group-sm">
              <button class="btn" id="request-view-json" type="button">JSON</button>
              <button class="btn active" id="request-view-prompt" type="button">Prompt</button>
            </div>
          </div>
        </div>

        <!-- Prompt View (Default) -->
        <div id="request-prompt-view">
          <div class="card card-sm">
            <div class="card-header">
              <div class="card-title small">System Prompt</div>
            </div>
            <div class="card-body p-2">
              <pre class="mb-0 small" style="max-height: 150px; overflow-y: auto;" id="preview-system-prompt">No system prompt</pre>
            </div>
          </div>

          <div class="card card-sm mt-2">
            <div class="card-header">
              <div class="card-title small">User Prompt (Template Content)</div>
            </div>
            <div class="card-body p-2">
              <pre class="mb-0 small" style="max-height: 300px; overflow-y: auto;" id="preview-user-prompt">Select a template to preview the prompt</pre>
            </div>
          </div>
        </div>

        <!-- JSON View (Hidden by default) -->
        <div id="request-json-view" class="d-none">
          <div class="border rounded p-3 bg-secondary-lt" style="max-height: 500px; overflow-y: auto;">
            <pre class="mb-0 small" id="preview-request-json">{}</pre>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Right Column: Response Preview -->
  <div class="col-lg-6">
    <div class="card h-100">
      <div class="card-header">
        <h3 class="card-title">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon me-2" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 6l-6 6l6 6" /></svg>
          Expected Response
        </h3>
        <div class="card-actions">
          <span class="badge bg-green-lt" id="response-size-badge">Not generated yet</span>
          <button class="btn btn-sm btn-icon" id="copy-response-btn" type="button" title="Copy response" disabled>
            <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z" /><path d="M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2" /></svg>
          </button>
        </div>
      </div>
      <div class="card-body">
        <!-- Response Preview (Before Generation) -->
        <div id="response-preview-empty" class="empty">
          <div class="empty-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 9h8" /><path d="M8 13h6" /><path d="M18 4a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-5l-5 3v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12z" /></svg>
          </div>
          <p class="empty-title">Response not yet received</p>
          <p class="empty-subtitle text-secondary">
            The AI response will appear here after generation
          </p>
          <div class="empty-action">
            <button class="btn btn-primary" id="preview-generate-btn" type="button">
              <svg xmlns="http://www.w3.org/2000/svg" class="icon me-2" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 3c7.2 0 9 1.8 9 9s-1.8 9 -9 9s-9 -1.8 -9 -9s1.8 -9 9 -9z" /><path d="M12 7v5l3 3" /></svg>
              Generate Now
            </button>
          </div>
        </div>

        <!-- Response Content (After Generation) -->
        <div id="response-content" class="d-none">
          <!-- Response Metadata -->
          <div class="card card-sm bg-green-lt mb-3">
            <div class="card-body">
              <div class="row g-2 small">
                <div class="col-md-6">
                  <div class="text-muted">Status</div>
                  <div class="fw-bold" id="preview-response-status">—</div>
                </div>
                <div class="col-md-6">
                  <div class="text-muted">Tokens</div>
                  <div class="fw-bold" id="preview-response-tokens">—</div>
                </div>
                <div class="col-md-6">
                  <div class="text-muted">Duration</div>
                  <div class="fw-bold" id="preview-response-duration">—</div>
                </div>
                <div class="col-md-6">
                  <div class="text-muted">Cost</div>
                  <div class="fw-bold" id="preview-response-cost">—</div>
                </div>
              </div>
            </div>
          </div>

          <!-- Response Tabs -->
          <div class="mb-2">
            <div class="btn-group btn-group-sm w-100">
              <button class="btn active" id="response-view-code" type="button">Generated Code</button>
              <button class="btn" id="response-view-raw" type="button">Raw Response</button>
            </div>
          </div>

          <!-- Generated Code View -->
          <div id="response-code-view">
            <div class="card card-sm mb-2">
              <div class="card-header">
                <div class="card-title small">Frontend Code</div>
              </div>
              <div class="card-body p-2">
                <pre class="mb-0 small" style="max-height: 250px; overflow-y: auto;" id="preview-frontend-code">No frontend code generated</pre>
              </div>
            </div>

            <div class="card card-sm">
              <div class="card-header">
                <div class="card-title small">Backend Code</div>
              </div>
              <div class="card-body p-2">
                <pre class="mb-0 small" style="max-height: 250px; overflow-y: auto;" id="preview-backend-code">No backend code generated</pre>
              </div>
            </div>
          </div>

          <!-- Raw Response View -->
          <div id="response-raw-view" class="d-none">
            <div class="border rounded p-3 bg-secondary-lt" style="max-height: 550px; overflow-y: auto;">
              <pre class="mb-0 small" id="preview-response-raw">{}</pre>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Action Bar -->
<div class="card mt-4">
  <div class="card-body">
    <div class="row align-items-center">
      <div class="col-md-8">
        <h4 class="mb-1">Ready to Generate?</h4>
        <p class="text-secondary mb-0 small">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-inline me-1" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M12 8l0 4" /><path d="M12 16l.01 0" /></svg>
          This will send the above request to OpenRouter and generate your application code
        </p>
      </div>
      <div class="col-md-4 text-md-end mt-3 mt-md-0">
        <div class="btn-list">
          <button class="btn" id="back-to-scaffolding-btn" type="button">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon me-2" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 6l-6 6l6 6" /></svg>
            Back
          </button>
          <button class="btn btn-primary" id="start-generation-btn" type="button">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon me-2" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 4v16l13 -8z" /></svg>
            Start Generation
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
