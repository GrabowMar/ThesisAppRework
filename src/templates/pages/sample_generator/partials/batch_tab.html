{# Batch Tab - Redirects to unified Generation tab #}
<div class="alert alert-info mb-4">
  <div class="d-flex">
    <div>
      <svg xmlns="http://www.w3.org/2000/svg" class="icon alert-icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M12 8l0 4" /><path d="M12 16l.01 0" /></svg>
    </div>
    <div>
      <h4 class="alert-title">Batch & Individual Generation Unified</h4>
      <div class="text-secondary">Batch and individual generation are now combined in the Generation tab. Select "Multiple" or "All" mode for batch operations.</div>
    </div>
  </div>
</div>

<div class="card">
  <div class="card-body text-center">
    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-lg text-primary mb-3" width="48" height="48" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 4v16l13 -8z" /></svg>
    <h3>Use the Generation Tab</h3>
    <p class="text-secondary mb-4">The new unified generation interface supports both single and batch operations with improved workflow and control.</p>
    <button class="btn btn-primary" type="button" data-bs-toggle="tab" data-bs-target="#generation">
      <svg xmlns="http://www.w3.org/2000/svg" class="icon me-2" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 6l6 6l-6 6" /></svg>
      Go to Generation Tab
    </button>
  </div>
</div>

<div class="row g-4">
  <!-- Templates Selection -->
  <div class="col-lg-6">
    <div class="card">
      <div class="card-header">
        <h3 class="card-title">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon me-2" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 8l-4 4l4 4" /><path d="M17 8l4 4l-4 4" /><path d="M14 4l-4 16" /></svg>
          Templates
        </h3>
        <div class="card-actions">
          <label class="form-check form-switch m-0">
            <input class="form-check-input" type="checkbox" id="select-all-templates">
            <span class="form-check-label">Select all</span>
          </label>
        </div>
      </div>
      <div class="card-body" style="max-height: 400px; overflow-y: auto;">
        <div class="row g-2" id="templates-checkbox-list">
          <div class="col-12">
            <div class="empty">
              <div class="empty-icon">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" /></svg>
              </div>
              <p class="empty-title">Loading templates...</p>
              <p class="empty-subtitle text-secondary">Templates will appear here</p>
            </div>
          </div>
        </div>
      </div>
      <div class="card-footer d-flex justify-content-between">
        <span class="text-muted" id="selected-templates-count">0 selected</span>
        <button class="btn btn-sm btn-ghost-secondary" type="button" id="reload-batch-templates-btn">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4" /><path d="M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4" /></svg>
          Reload
        </button>
      </div>
    </div>
  </div>

  <!-- Models Selection -->
  <div class="col-lg-6">
    <div class="card">
      <div class="card-header">
        <h3 class="card-title">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon me-2" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 9h8" /><path d="M8 13h6" /><path d="M18 4a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-5l-5 3v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12z" /></svg>
          AI Models
        </h3>
        <div class="card-actions">
          <label class="form-check form-switch m-0">
            <input class="form-check-input" type="checkbox" id="select-all-models">
            <span class="form-check-label">Select all</span>
          </label>
        </div>
      </div>
      <div class="card-body" style="max-height: 400px; overflow-y: auto;">
        <div class="row g-2" id="models-checkbox-list">
          <div class="col-12">
            <div class="empty">
              <div class="empty-icon">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 3c7.2 0 9 1.8 9 9s-1.8 9 -9 9s-9 -1.8 -9 -9s1.8 -9 9 -9z" /></svg>
              </div>
              <p class="empty-title">Loading models...</p>
              <p class="empty-subtitle text-secondary">Models will appear from registry</p>
            </div>
          </div>
        </div>
      </div>
      <div class="card-footer d-flex justify-content-between">
        <span class="text-muted" id="selected-models-count">0 selected</span>
        <div class="d-flex align-items-center gap-2">
          <span class="form-label mb-0">Workers:</span>
          <input type="number" id="batch-workers" class="form-control form-control-sm" style="width: 70px;" value="3" min="1" max="10">
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Batch Queue -->
<div class="card mt-4">
  <div class="card-header">
    <h3 class="card-title">
      <svg xmlns="http://www.w3.org/2000/svg" class="icon me-2" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2" /><path d="M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z" /><path d="M9 12l.01 0" /><path d="M13 12l2 0" /><path d="M9 16l.01 0" /><path d="M13 16l2 0" /></svg>
      Batch Queue
    </h3>
    <div class="card-subtitle">Configure and execute batch generation</div>
    <div class="card-actions btn-actions">
      <button id="preview-batch-btn" class="btn btn-sm btn-ghost-secondary" type="button" title="Preview combinations">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" /><path d="M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6" /></svg>
      </button>
      <button id="refresh-tasks-btn" class="btn btn-sm btn-ghost-secondary" type="button" title="Refresh queue">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4" /><path d="M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4" /></svg>
      </button>
    </div>
  </div>
  <div class="card-body border-bottom">
    <div id="batch-preview" class="alert alert-warning mb-0">
      <svg xmlns="http://www.w3.org/2000/svg" class="icon alert-icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 9v4" /><path d="M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z" /><path d="M12 16h.01" /></svg>
      <strong>Batch preview:</strong> Select templates and models to see generation plan. This will generate code for all combinations with automatic backups.
    </div>
  </div>
  <div class="table-responsive">
    <table class="table table-vcenter card-table table-hover">
      <thead>
        <tr>
          <th>Batch ID</th>
          <th>Progress</th>
          <th>Completed</th>
          <th>Failed</th>
          <th>Status</th>
          <th>Elapsed</th>
          <th class="w-1"></th>
        </tr>
      </thead>
      <tbody id="batch-operations-body">
        <tr>
          <td colspan="7" class="text-center text-muted py-4">
            <div class="empty">
              <p class="empty-title">No batch operations</p>
              <p class="empty-subtitle">Select templates and models, then start a batch</p>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="card-footer">
    <button id="start-batch-btn" class="btn btn-primary" type="button" disabled>
      <svg xmlns="http://www.w3.org/2000/svg" class="icon me-2" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 4v16l13 -8z" /></svg>
      Start Batch Generation
    </button>
    <span class="badge bg-secondary ms-2" id="batch-summary-badge">No batch configured</span>
  </div>
</div>