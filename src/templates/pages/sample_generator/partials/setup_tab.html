<!-- Step 1: Setup & Configuration -->
<div class="row g-4">
  <!-- Left Column: What to Generate -->
  <div class="col-lg-6">
    <div class="card">
      <div class="card-header">
        <h3 class="card-title">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon me-2" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" /></svg>
          Application Template
        </h3>
        <div class="card-actions">
          <button id="reload-templates-btn" class="btn btn-sm btn-icon" type="button" title="Reload templates">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4" /><path d="M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4" /></svg>
          </button>
        </div>
      </div>
      <div class="card-body">
        <div class="mb-3">
          <label for="template-select" class="form-label fw-bold">Choose application template</label>
          <select id="template-select" class="form-select" aria-label="Template selection">
            <option value="">Select a template...</option>
          </select>
          <small class="form-hint">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-inline" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M12 8l0 4" /><path d="M12 16l.01 0" /></svg>
            Templates define what kind of app to generate (e.g., login, blog, e-commerce)
          </small>
        </div>

        <!-- Template Preview Card -->
        <div class="card card-sm mb-3 bg-secondary-lt">
          <div class="card-header">
            <h4 class="card-title">Template Preview</h4>
          </div>
          <div class="card-body" style="max-height: 250px; overflow-y: auto;">
            <div id="template-preview" class="small text-secondary">
              Select a template to preview its prompt content
            </div>
          </div>
        </div>

        <!-- Template Metadata -->
        <div id="template-metadata" class="d-none">
          <div class="row g-2 mb-3">
            <div class="col-6">
              <div class="card card-sm">
                <div class="card-body p-2">
                  <div class="text-muted small">App Number</div>
                  <div class="fw-bold" id="template-app-num">—</div>
                </div>
              </div>
            </div>
            <div class="col-6">
              <div class="card card-sm">
                <div class="card-body p-2">
                  <div class="text-muted small">Context</div>
                  <div class="fw-bold" id="template-context">—</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Right Column: AI Model & Settings -->
  <div class="col-lg-6">
    <div class="card">
      <div class="card-header">
        <h3 class="card-title">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon me-2" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 9h8" /><path d="M8 13h6" /><path d="M18 4a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-5l-5 3v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12z" /></svg>
          AI Model Selection
        </h3>
        <div class="card-actions">
          <button class="btn btn-sm btn-icon" id="refresh-models-btn" type="button" title="Refresh models">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M12 12l0 -3" /><path d="M12 12l2 2" /></svg>
          </button>
        </div>
      </div>
      <div class="card-body">
        <div class="mb-3">
          <label for="model-select" class="form-label fw-bold">Choose AI model</label>
          <select id="model-select" class="form-select" aria-label="Model selection">
            <option value="">Select a model...</option>
          </select>
          <small class="form-hint">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-inline" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M12 8l0 4" /><path d="M12 16l.01 0" /></svg>
            The AI model that will generate the application code via OpenRouter
          </small>
        </div>

        <!-- Generation Options -->
        <div class="mb-3">
          <label class="form-label fw-bold">Generation scope</label>
          <div class="row g-2">
            <div class="col-6">
              <label class="form-check form-switch">
                <input class="form-check-input" type="checkbox" id="generate-frontend" checked>
                <span class="form-check-label">
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-inline me-1" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z" /><path d="M8 11l0 5" /><path d="M8 8l0 .01" /><path d="M12 8l0 8" /><path d="M16 8l0 8" /></svg>
                  Generate Frontend
                </span>
              </label>
            </div>
            <div class="col-6">
              <label class="form-check form-switch">
                <input class="form-check-input" type="checkbox" id="generate-backend" checked>
                <span class="form-check-label">
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-inline me-1" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 12h1m8 -9v1m8 8h1m-15.4 -6.4l.7 .7m12.1 -.7l-.7 .7" /><path d="M9 16a5 5 0 1 1 6 0a3.5 3.5 0 0 0 -1 3a2 2 0 0 1 -4 0a3.5 3.5 0 0 0 -1 -3" /><path d="M9.7 17l4.6 0" /></svg>
                  Generate Backend
                </span>
              </label>
            </div>
          </div>
        </div>

        <!-- Advanced Options -->
        <div class="card card-sm bg-azure-lt mb-3">
          <div class="card-body">
            <div class="row g-3">
              <div class="col-sm-6">
                <label class="form-label small">Max Concurrent</label>
                <input type="number" class="form-control form-control-sm" id="max-concurrent" min="1" max="8" value="1">
                <small class="form-hint">Parallel requests (1-8)</small>
              </div>
              <div class="col-sm-6">
                <label class="form-label small">Timeout (seconds)</label>
                <input type="number" class="form-control form-control-sm" id="request-timeout" min="60" max="600" value="300">
                <small class="form-hint">API request timeout</small>
              </div>
            </div>
            <div class="mt-3">
              <label class="form-check form-switch">
                <input class="form-check-input" type="checkbox" id="create-backup" checked>
                <span class="form-check-label small">
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-inline me-1" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 3a12 12 0 0 0 8.5 3a12 12 0 0 1 -8.5 15a12 12 0 0 1 -8.5 -15a12 12 0 0 0 8.5 -3" /></svg>
                  Create backups before overwriting
                </span>
              </label>
            </div>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="d-grid gap-2">
          <button id="proceed-to-scaffolding-btn" class="btn btn-primary btn-lg" type="button" disabled>
            <svg xmlns="http://www.w3.org/2000/svg" class="icon me-2" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 6l6 6l-6 6" /></svg>
            Proceed to Scaffolding
          </button>
          <button id="global-refresh-btn" class="btn btn-outline-secondary" type="button">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon me-2" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4" /><path d="M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4" /></svg>
            Refresh All Data
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Configuration Summary -->
<div class="card mt-4">
  <div class="card-header">
    <h3 class="card-title">
      <svg xmlns="http://www.w3.org/2000/svg" class="icon me-2" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2" /><path d="M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z" /></svg>
      Current Configuration
    </h3>
    <div class="card-subtitle">Review your setup before proceeding</div>
  </div>
  <div class="card-body">
    <div id="config-summary" class="empty">
      <div class="empty-icon">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z" /><path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /></svg>
      </div>
      <p class="empty-title">No configuration yet</p>
      <p class="empty-subtitle text-secondary">
        Select a template and model to see your configuration summary
      </p>
    </div>
    
    <div id="config-details" class="d-none">
      <div class="row g-3">
        <div class="col-md-3">
          <div class="text-muted small mb-1">Template</div>
          <div class="fw-bold" id="summary-template">—</div>
        </div>
        <div class="col-md-3">
          <div class="text-muted small mb-1">Model</div>
          <div class="fw-bold" id="summary-model">—</div>
        </div>
        <div class="col-md-2">
          <div class="text-muted small mb-1">Scope</div>
          <div id="summary-scope">—</div>
        </div>
        <div class="col-md-2">
          <div class="text-muted small mb-1">Concurrent</div>
          <div id="summary-concurrent">1</div>
        </div>
        <div class="col-md-2">
          <div class="text-muted small mb-1">Backups</div>
          <div id="summary-backup">
            <span class="badge bg-success">Enabled</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
