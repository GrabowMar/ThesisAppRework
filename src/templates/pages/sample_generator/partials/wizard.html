{# Sample Generator Wizard - analysis-style layout #}
<div id="sample-generator-wizard">
  <div class="row row-cards g-3">
    <div class="col-xxl-8 col-xl-7 col-lg-7">
      <div class="row row-cards g-3">
        <input type="hidden" id="input-scaffolding-id" value="default">
        <div class="col-12 wizard-panel active" data-panel="1">
          <div class="card card-table-compact">
            <div class="card-header d-flex flex-wrap align-items-center gap-3 py-2">
              <div class="d-flex align-items-center gap-2">
                <span class="badge bg-primary text-uppercase rounded-pill px-3">Step 1</span>
                <div>
                  <h3 class="card-title mb-0 d-flex align-items-center gap-2">
                    <i class="fas fa-cube text-primary"></i>
                    <span>Select Scaffolding</span>
                  </h3>
                  <div class="text-muted small">Choose the base project scaffold for generated apps.</div>
                </div>
              </div>
            </div>
            <div class="card-body border-top">
              <div class="row g-4">
                <div class="col-12 col-lg-7">
                  <div class="card border-dashed h-100">
                    <div class="card-body">
                      <h3 class="h5">Choose scaffolding</h3>
                      <p class="text-muted small">Select the project scaffolding that defines Docker setup, frontend/backed folders, and baseline configuration.</p>
                      <div id="scaffolding-selection-list" class="row g-3">
                        <div class="col-12">
                          <div class="card selectable-card" role="button" onclick="selectScaffolding('default')">
                            <div class="card-body d-flex align-items-center gap-3">
                              <div class="avatar bg-primary-lt text-primary rounded"><i class="fas fa-cube"></i></div>
                              <div class="flex-fill">
                                <h4 class="h6 mb-1">Default React + Flask stack</h4>
                                <p class="text-muted small mb-0">Includes Docker Compose, Celery worker, Vite frontend, Flask API, and analyzer integration hooks.</p>
                              </div>
                              <div>
                                <span class="badge bg-success-lt" id="scaffolding-selected-indicator">Selected</span>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-12 col-lg-5">
                  <div id="scaffolding-preview" class="card h-100">
                    <div class="card-header d-flex align-items-center justify-content-between">
                      <h3 class="h6 mb-0">Scaffolding overview</h3>
                      <button type="button" class="btn btn-sm btn-ghost-primary" onclick="viewScaffoldingDetails('default')">Details</button>
                    </div>
                    <div class="card-body">
                      <ul class="list-unstyled small text-muted mb-0 d-grid gap-1">
                        <li><i class="fas fa-box-open me-2 text-primary"></i>Pre-configured Docker + docker-compose</li>
                        <li><i class="fas fa-plug me-2 text-primary"></i>Port allocation via PortAllocationService</li>
                        <li><i class="fas fa-layer-group me-2 text-primary"></i>React (Vite) frontend scaffold</li>
                        <li><i class="fas fa-server me-2 text-primary"></i>Flask backend with Celery integration</li>
                        <li><i class="fas fa-file-code me-2 text-primary"></i>Analyzer wiring + configuration templates</li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
              <div class="alert alert-info mt-4 help-content active" data-help="1">
                <i class="fas fa-lightbulb me-2"></i>
                Scaffolding defines baseline file layout, Docker configuration, and environment defaults. The wizard ships with the flagship React+Flask scaffold.
              </div>
            </div>
          </div>
        </div>

        <div class="col-12 wizard-panel" data-panel="2">
          <div class="card card-table-compact">
            <div class="card-header d-flex flex-wrap align-items-center gap-3 py-2">
              <div class="d-flex align-items-center gap-2">
                <span class="badge bg-primary text-uppercase rounded-pill px-3">Step 2</span>
                <div>
                  <h3 class="card-title mb-0 d-flex align-items-center gap-2">
                    <i class="fas fa-layer-group text-primary"></i>
                    <span>Select Templates &amp; Models</span>
                  </h3>
                  <div class="text-muted small">Pick the requirements and AI models to combine.</div>
                </div>
              </div>
            </div>
            <div class="card-body border-top">
              <div class="row g-4">
                <div class="col-12 col-xl-6">
                  <div class="card h-100">
                    <div class="card-header d-flex justify-content-between align-items-center">
                      <h3 class="h6 mb-0">Templates</h3>
                      <div class="btn-group btn-group-sm" role="group">
                        <button type="button" class="btn btn-ghost-primary" onclick="selectAllTemplates()">Select all</button>
                        <button type="button" class="btn btn-ghost-secondary" onclick="clearAllTemplates()">Clear</button>
                      </div>
                    </div>
                    <div class="card-body">
                      <div class="input-group input-group-sm mb-3">
                        <span class="input-group-text"><i class="fas fa-search"></i></span>
                        <input type="search" class="form-control" placeholder="Search templates" oninput="filterTemplates(this.value)">
                      </div>
                      <div id="template-selection-list" class="list-group list-group-flush" style="max-height: 360px; overflow-y: auto;">
                        <div class="text-center text-muted py-5">
                          <div class="spinner-border text-primary"></div>
                          <p class="small mb-0 mt-3">Loading templates...</p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-12 col-xl-6">
                  <div class="card h-100">
                    <div class="card-header d-flex justify-content-between align-items-center">
                      <h3 class="h6 mb-0">Models</h3>
                      <div class="btn-group btn-group-sm" role="group">
                        <button type="button" class="btn btn-ghost-primary" onclick="selectAllModels()">Select all</button>
                        <button type="button" class="btn btn-ghost-secondary" onclick="clearAllModels()">Clear</button>
                      </div>
                    </div>
                    <div class="card-body">
                      <div class="input-group input-group-sm mb-3">
                        <span class="input-group-text"><i class="fas fa-search"></i></span>
                        <input type="search" class="form-control" placeholder="Search models" oninput="filterModels(this.value)">
                      </div>
                      <div id="model-selection-list" class="list-group list-group-flush" style="max-height: 360px; overflow-y: auto;">
                        <div class="text-center text-muted py-5">
                          <div class="spinner-border text-primary"></div>
                          <p class="small mb-0 mt-3">Loading models...</p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="card mt-4" id="selection-summary-card">
                <div class="card-body">
                  <div class="d-flex align-items-center justify-content-between flex-wrap gap-2">
                    <div>
                      <h3 class="h6 mb-1">Generation Summary</h3>
                      <p class="text-muted small mb-0">Totals update as you pick templates and models.</p>
                    </div>
                    <div class="text-end ms-auto">
                      <div class="fw-bold h4 mb-0"><span id="selection-total-pairs">0</span></div>
                      <div class="small text-muted">pairs ready</div>
                    </div>
                  </div>
                  <div class="row mt-3 g-2 g-sm-3">
                    <div class="col-sm-4">
                      <div class="card card-sm border-0 shadow-none bg-primary-lt">
                        <div class="card-body py-2 text-center">
                          <div class="h5 mb-0" id="selection-template-count">0</div>
                          <div class="small text-muted">Templates</div>
                        </div>
                      </div>
                    </div>
                    <div class="col-sm-4">
                      <div class="card card-sm border-0 shadow-none bg-warning-lt">
                        <div class="card-body py-2 text-center">
                          <div class="h5 mb-0" id="selection-model-count">0</div>
                          <div class="small text-muted">Models</div>
                        </div>
                      </div>
                    </div>
                    <div class="col-sm-4">
                      <div class="card card-sm border-0 shadow-none bg-success-lt">
                        <div class="card-body py-2 text-center">
                          <div class="h5 mb-0" id="selection-average-cost">–</div>
                          <div class="small text-muted">Avg input $/1K</div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="border rounded px-3 py-2 mt-3 bg-light text-muted small" id="selection-cost-note">
                    Select at least one model to see estimated pricing.
                  </div>
                </div>
              </div>
              <div class="alert alert-info mt-4 help-content" data-help="2">
                <i class="fas fa-lightbulb me-2"></i>
                Pick at least one template and one model. The wizard multiplies selections to produce generation pairs.
              </div>
            </div>
          </div>
        </div>

        <div class="col-12 wizard-panel" data-panel="3">
          <div class="card card-table-compact">
            <div class="card-header d-flex flex-wrap align-items-center gap-3 py-2">
              <div class="d-flex align-items-center gap-2">
                <span class="badge bg-primary text-uppercase rounded-pill px-3">Step 3</span>
                <div>
                  <h3 class="card-title mb-0 d-flex align-items-center gap-2">
                    <i class="fas fa-clipboard-check text-primary"></i>
                    <span>Review &amp; Generate</span>
                  </h3>
                  <div class="text-muted small">Confirm selections, launch generation, and track results.</div>
                </div>
              </div>
            </div>
            <div class="card-body border-top">
              <div class="row g-4">
                <div class="col-12">
                  <div class="card bg-light border-0">
                    <div class="card-body">
                      <h3 class="h6">Generation summary</h3>
                      <p class="text-muted small mb-0">You are about to generate <strong id="summary-total-generations">0</strong> combinations using the selected scaffolding, templates, and models.</p>
                    </div>
                  </div>
                </div>
                <div class="col-lg-6">
                  <div class="card h-100">
                    <div class="card-header">
                      <h3 class="h6 mb-0">Progress</h3>
                    </div>
                    <div class="card-body">
                      <div class="progress mb-3" style="height: 8px;">
                        <div id="overall-progress-bar" class="progress-bar progress-bar-striped progress-bar-animated" style="width: 0%;"></div>
                      </div>
                      <div class="d-flex justify-content-between small text-muted">
                        <span><strong id="progress-completed">0</strong> completed</span>
                        <span>Total: <strong id="progress-total">0</strong></span>
                      </div>
                      <div class="row mt-3 g-3 text-center">
                        <div class="col">
                          <div class="card card-sm bg-success-lt">
                            <div class="card-body">
                              <div class="h4 mb-0" id="status-completed">0</div>
                              <div class="small text-muted">Succeeded</div>
                            </div>
                          </div>
                        </div>
                        <div class="col">
                          <div class="card card-sm bg-danger-lt">
                            <div class="card-body">
                              <div class="h4 mb-0" id="status-failed">0</div>
                              <div class="small text-muted">Failed</div>
                            </div>
                          </div>
                        </div>
                        <div class="col">
                          <div class="card card-sm bg-secondary-lt">
                            <div class="card-body">
                              <div class="h4 mb-0" id="status-in-progress">0</div>
                              <div class="small text-muted">In progress</div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-6">
                  <div class="card h-100">
                    <div class="card-header">
                      <h3 class="h6 mb-0">Status overview</h3>
                    </div>
                    <div class="card-body">
                      <dl class="row mb-0 small">
                        <dt class="col-sm-6 text-muted">Total combinations</dt>
                        <dd class="col-sm-6" id="status-total">0</dd>
                        <dt class="col-sm-6 text-muted">Scaffolding</dt>
                        <dd class="col-sm-6" id="status-scaffolding">Default React + Flask</dd>
                        <dt class="col-sm-6 text-muted">Templates selected</dt>
                        <dd class="col-sm-6" id="status-templates">0</dd>
                        <dt class="col-sm-6 text-muted">Models selected</dt>
                        <dd class="col-sm-6" id="status-models">0</dd>
                        <dt class="col-sm-6 text-muted">Est. input cost / 1K tokens</dt>
                        <dd class="col-sm-6" id="status-cost">–</dd>
                      </dl>
                    </div>
                  </div>
                </div>
                <div class="col-12">
                  <div class="card">
                    <div class="card-header d-flex align-items-center justify-content-between">
                      <h3 class="h6 mb-0">Generation results</h3>
                      <span class="badge bg-secondary-lt" id="results-count-badge">0 rows</span>
                    </div>
                    <div class="card-body table-responsive">
                      <table class="table table-sm align-middle mb-0">
                        <thead class="text-muted small">
                          <tr>
                            <th style="width: 40px;">#</th>
                            <th>Template</th>
                            <th>Model</th>
                            <th>Status</th>
                            <th>Message</th>
                          </tr>
                        </thead>
                        <tbody id="generation-results-body">
                          <tr id="generation-empty-state">
                            <td colspan="5" class="text-center text-muted py-4">
                              <i class="fas fa-robot fa-2x mb-3 opacity-50"></i>
                              <p class="mb-0">No generation results yet. Configure selections and press <strong>Start generation</strong>.</p>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
              <div class="alert alert-info mt-4 help-content" data-help="3">
                <i class="fas fa-lightbulb me-2"></i>
                Monitor progress and review results. You can download outputs from the results page once generation finishes.
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-xxl-4 col-xl-5 col-lg-5">
      <div class="analysis-sidebar right-sticky-sidebar sticky-top">
        <div class="card card-sm mb-3">
          <div class="card-header py-2">
            <h6 class="card-title mb-0">
              <i class="fas fa-route me-2 text-primary"></i>Progress
            </h6>
          </div>
          <div class="card-body py-2">
            <div class="wizard-progress">
              <div class="progress mb-3">
                <div class="progress-bar bg-primary" role="progressbar" id="wizard-progress-bar" aria-label="Sample generator progress" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
              </div>
              <div class="steps steps-counter steps-xs">
                <div class="step-item active" data-step="1" _="on click call goToStep(1)" role="button" tabindex="0">
                  <div class="step-icon">
                    <i class="fas fa-cube"></i>
                  </div>
                  <div class="step-title">Scaffold</div>
                </div>
                <div class="step-item" data-step="2" _="on click call goToStep(2)" role="button" tabindex="0">
                  <div class="step-icon">
                    <i class="fas fa-layer-group"></i>
                  </div>
                  <div class="step-title">Selections</div>
                </div>
                <div class="step-item" data-step="3" _="on click call goToStep(3)" role="button" tabindex="0">
                  <div class="step-icon">
                    <i class="fas fa-clipboard-check"></i>
                  </div>
                  <div class="step-title">Review</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="card card-sm mb-3" id="wizard-nav-card">
          <div class="card-header py-2">
            <h6 class="card-title mb-0">
              <i class="fas fa-gamepad me-2 text-primary"></i>Navigation
            </h6>
          </div>
          <div class="card-body py-2">
            <div class="d-flex flex-column gap-2">
              <div class="d-flex justify-content-between align-items-center small text-muted">
                <span>Step <span id="current-step" class="fw-bold text-primary">1</span> of <span class="fw-bold">3</span></span>
                <span id="progress-percentage" class="fw-semibold">0%</span>
              </div>
              <div class="d-flex justify-content-between align-items-center gap-2">
                <button type="button" class="btn btn-ghost-secondary btn-sm" id="prev-btn" _="on click call previousStep()" disabled>
                  <i class="fas fa-chevron-left me-1"></i>Previous
                </button>
                <div class="d-flex gap-2 flex-grow-1">
                  <button type="button" class="btn btn-primary btn-sm flex-grow-1" id="next-btn" _="on click call nextStep()">
                    Complete this step to continue
                  </button>
                  <button type="button" class="btn btn-success btn-sm flex-grow-1 d-none" id="start-btn" _="on click call startGeneration()">
                    <i class="fas fa-play me-1"></i>Start Generation
                  </button>
                  <button type="button" class="btn btn-success btn-sm flex-grow-1 d-none" id="start-btn-loading" disabled>
                    <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>Generating...
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="card card-sm mb-3">
          <div class="card-header py-2">
            <h6 class="card-title mb-0">
              <i class="fas fa-clipboard-list me-2 text-primary"></i>Summary
            </h6>
          </div>
          <div class="card-body p-3">
            <div class="mb-3">
              <div class="d-flex justify-content-between align-items-center mb-2">
                <span class="small text-muted">Scaffolding</span>
                <span id="sidebar-scaffolding-badge" class="badge bg-success-lt">Selected</span>
              </div>
              <div id="sidebar-scaffolding-name" class="fw-semibold">Default React + Flask stack</div>
            </div>
            <div class="border-top pt-3 mt-3">
              <div class="d-flex justify-content-between align-items-center mb-2">
                <span class="small text-muted">Templates</span>
                <div class="d-flex align-items-center gap-2">
                  <button type="button" class="btn btn-link p-0 small text-danger d-none" id="clear-templates-btn" onclick="clearAllTemplates()">clear</button>
                  <span class="badge bg-secondary-lt" id="sidebar-template-count">0</span>
                </div>
              </div>
              <ul id="sidebar-template-list" class="list-unstyled small text-muted mb-0">
                <li class="text-muted">No templates selected</li>
              </ul>
            </div>
            <div class="border-top pt-3 mt-3">
              <div class="d-flex justify-content-between align-items-center mb-2">
                <span class="small text-muted">Models</span>
                <div class="d-flex align-items-center gap-2">
                  <button type="button" class="btn btn-link p-0 small text-danger d-none" id="clear-models-btn" onclick="clearAllModels()">clear</button>
                  <span class="badge bg-secondary-lt" id="sidebar-model-count">0</span>
                </div>
              </div>
              <ul id="sidebar-model-list" class="list-unstyled small text-muted mb-0">
                <li class="text-muted">No models selected</li>
              </ul>
            </div>
            <div class="card bg-azure-lt mt-3">
              <div class="card-body py-3">
                <div class="d-flex align-items-center justify-content-between gap-3">
                  <div>
                    <div class="text-muted small">Pairs ready</div>
                    <div class="h4 mb-0" id="sidebar-total-pairs">0</div>
                  </div>
                  <div class="text-end">
                    <div class="text-muted small">Avg input $/1K</div>
                    <div class="fw-semibold" id="sidebar-average-cost">–</div>
                  </div>
                </div>
              </div>
            </div>
            <div class="small text-muted mt-2" id="sidebar-cost-note">Select models to estimate cost.</div>
          </div>
        </div>

        <div class="card card-sm" id="guide-card">
          <div class="card-header py-2" data-bs-toggle="collapse" data-bs-target="#guide-collapse" role="button" aria-expanded="false" aria-controls="guide-collapse">
            <div class="d-flex align-items-center justify-content-between">
              <h6 class="card-title mb-0">
                <i class="fas fa-info-circle me-2 text-primary"></i>Wizard Guide
              </h6>
              <span class="collapse-indicator text-muted small" id="guide-collapse-indicator">Show</span>
            </div>
          </div>
          <div id="guide-collapse" class="collapse">
            <div class="card-body py-2">
              <ol class="small text-muted mb-0">
                <li class="mb-2">Confirm scaffolding baseline fits your target architecture.</li>
                <li class="mb-2">Pick templates (requirements) and combine with desired models.</li>
                <li class="mb-2">Review summary, then trigger generation to start Docker-ready projects.</li>
                <li>Monitor progress and download outputs from the results table.</li>
              </ol>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
