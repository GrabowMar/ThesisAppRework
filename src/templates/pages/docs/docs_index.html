{% extends "layouts/base.html" %}

{% block title %}Documentation - AI Model Analysis Platform{% endblock %}

{% block content %}
<div class="page-body mt-0">
    <div class="container-fluid">
        <!-- Search -->
        <div class="row g-3 mb-3">
            <div class="col-12">
                <div class="card">
                    <div class="card-body">
                        <div class="row g-2 align-items-center">
                            <div class="col-md-6">
                                <h3 class="card-title mb-0">
                                    <i class="fas fa-book me-2"></i>
                                    Documentation
                                </h3>
                            </div>
                            <div class="col-md-6">
                                <div class="input-group input-group-flat">
                                    <span class="input-group-text">
                                        <i class="fas fa-search"></i>
                                    </span>
                                    <input type="text"
                                           class="form-control"
                                           name="q"
                                           id="docs-search-input"
                                           placeholder="Search docs (title, category, filename)"
                                           hx-get="{{ url_for('docs.docs_search') }}"
                                           hx-trigger="keyup changed delay:300ms"
                                           hx-target="#docs-search-results"
                                           hx-indicator="#docs-search-spinner">
                                    <span id="docs-search-spinner" class="input-group-text htmx-indicator">
                                        <div class="spinner-border spinner-border-sm text-primary" role="status">
                                            <span class="visually-hidden">Searching...</span>
                                        </div>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Search Results (HTMX) -->
        <div id="docs-search-results" class="mb-4"></div>
        <!-- Quick Stats -->
            <div class="row g-3 mb-4">
                <div class="col-6 col-md-3">
                    <div class="card card-sm">
                        <div class="card-body text-center">
                            <div class="text-primary h1 mb-1">
                                <i class="fas fa-robot"></i>
                            </div>
                            <div class="h3 mb-1">25+</div>
                            <div class="text-secondary small">AI Models</div>
                        </div>
                    </div>
                </div>
                <div class="col-6 col-md-3">
                    <div class="card card-sm">
                        <div class="card-body text-center">
                            <div class="text-success h1 mb-1">
                                <i class="fas fa-shield-alt"></i>
                            </div>
                            <div class="h3 mb-1">5</div>
                            <div class="text-secondary small">Analysis Types</div>
                        </div>
                    </div>
                </div>
                <div class="col-6 col-md-3">
                    <div class="card card-sm">
                        <div class="card-body text-center">
                            <div class="text-info h1 mb-1">
                                <i class="fab fa-docker"></i>
                            </div>
                            <div class="h3 mb-1">4</div>
                            <div class="text-secondary small">Microservices</div>
                        </div>
                    </div>
                </div>
                <div class="col-6 col-md-3">
                    <div class="card card-sm">
                        <div class="card-body text-center">
                            <div class="text-warning h1 mb-1">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="h3 mb-1">Real-time</div>
                            <div class="text-secondary small">Analytics</div>
                        </div>
                    </div>
                </div>
            </div>        <!-- Documentation Grid -->
        <div class="row g-4 mb-4">
            <!-- Core Documentation -->
            <div class="col-lg-8">
                <div class="card h-100">
                    <div class="card-header bg-primary text-white">
                        <h3 class="card-title text-white mb-0">
                            <i class="fas fa-book me-2"></i>
                            Core Documentation
                        </h3>
                    </div>
                    <div class="card-body">
                        {% if sections %}
                            {% for section in sections %}
                                {% if section.name in ['Quick Start','General','Architecture','Overview'] %}
                                    <div class="mb-3">
                                        <h4 class="h5">{{ section.name }}</h4>
                                        <div class="row g-3">
                                            {% for item in section.items %}
                                                <div class="col-md-6">
                                                    <a href="{{ url_for('docs.docs_file', filepath=item.relpath) }}" class="card card-link card-link-pop">
                                                        <div class="card-body">
                                                            <div class="d-flex align-items-center">
                                                                <div class="me-3">
                                                                    <div class="avatar bg-primary-lt">
                                                                        <i class="fas fa-file-alt"></i>
                                                                    </div>
                                                                </div>
                                                                <div>
                                                                    <div class="font-weight-medium">{{ item.title }}</div>
                                                                    <div class="text-secondary small mt-1">{{ section.name }} documentation</div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </a>
                                                </div>
                                            {% endfor %}
                                        </div>
                                    </div>
                                {% endif %}
                            {% endfor %}
                        {% else %}
                            <div class="text-secondary">No docs found.</div>
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="col-lg-4">
                <div class="card h-100">
                    <div class="card-header">
                        <h3 class="card-title mb-0">
                            <i class="fas fa-lightning-bolt me-2"></i>
                            Quick Actions
                        </h3>
                    </div>
                    <div class="card-body">
                        <div class="d-grid gap-2">
                            <a href="{{ url_for('main.dashboard') }}" class="btn btn-primary">
                                <i class="fas fa-tachometer-alt me-2"></i>
                                Go to Dashboard
                            </a>
                            <a href="{{ url_for('main.models_overview') }}" class="btn btn-ghost-success">
                                <i class="fas fa-robot me-2"></i>
                                Browse Models
                            </a>
                            <a href="{{ url_for('analysis.analysis_index') }}" class="btn btn-ghost-info">
                                <i class="fas fa-chart-line me-2"></i>
                                Start Analysis
                            </a>
                            <hr class="my-3">
                            <small class="text-secondary text-center">
                                <i class="fas fa-info-circle me-1"></i>
                                Need help? Check the overview first!
                            </small>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Platform Overview -->
        <div class="row g-4 mb-4">
            <div class="col-lg-8">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">
                            <i class="fas fa-rocket me-2"></i>
                            What You Can Do
                        </h3>
                    </div>
                    <div class="card-body">
                        <div class="row g-4">
                            <div class="col-md-6">
                                <div class="feature-icon-lg bg-primary-lt text-primary mb-3">
                                    <i class="fas fa-code"></i>
                                </div>
                                <h4 class="h5">Generate Applications</h4>
                                <p class="text-secondary mb-0">Create web applications using 25+ AI models from OpenAI, Anthropic, Google, and more.</p>
                            </div>
                            <div class="col-md-6">
                                <div class="feature-icon-lg bg-success-lt text-success mb-3">
                                    <i class="fas fa-shield-alt"></i>
                                </div>
                                <h4 class="h5">Security Analysis</h4>
                                <p class="text-secondary mb-0">Comprehensive security scanning with static analysis, dynamic testing, and OWASP ZAP integration.</p>
                            </div>
                            <div class="col-md-6">
                                <div class="feature-icon-lg bg-info-lt text-info mb-3">
                                    <i class="fas fa-tachometer-alt"></i>
                                </div>
                                <h4 class="h5">Performance Testing</h4>
                                <p class="text-secondary mb-0">Real-time performance monitoring with Locust-based load testing and detailed metrics.</p>
                            </div>
                            <div class="col-md-6">
                                <div class="feature-icon-lg bg-warning-lt text-warning mb-3">
                                    <i class="fas fa-brain"></i>
                                </div>
                                <h4 class="h5">AI-Powered Analysis</h4>
                                <p class="text-secondary mb-0">Advanced code analysis using AI models to identify patterns, issues, and optimization opportunities.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-4">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">
                            <i class="fas fa-cogs me-2"></i>
                            Tech Stack
                        </h3>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <div class="text-secondary small mb-1">Backend</div>
                            <div class="d-flex flex-wrap gap-1 mb-2">
                                <span class="badge bg-primary-lt text-primary">Flask</span>
                                <span class="badge bg-success-lt text-success">SQLAlchemy</span>
                                <span class="badge bg-warning-lt text-warning">Celery</span>
                                <span class="badge bg-danger-lt text-danger">Redis</span>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <div class="text-secondary small mb-1">Frontend</div>
                            <div class="d-flex flex-wrap gap-1 mb-2">
                                <span class="badge bg-info-lt text-info">HTMX</span>
                                <span class="badge bg-primary-lt text-primary">Bootstrap 5</span>
                                <span class="badge bg-secondary-lt text-secondary">Tabler.io</span>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <div class="text-secondary small mb-1">Infrastructure</div>
                            <div class="d-flex flex-wrap gap-1">
                                <span class="badge bg-primary-lt text-primary">Docker</span>
                                <span class="badge bg-info-lt text-info">PostgreSQL</span>
                                <span class="badge bg-warning-lt text-warning">WebSockets</span>
                            </div>
                        </div>
                        
                        <hr>
                        <div class="text-center">
                            <a href="{{ url_for('docs.docs_file', filepath='ARCHITECTURE.md') }}" class="btn btn-sm btn-ghost-primary">
                                <i class="fas fa-sitemap me-1"></i>
                                View Architecture
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Frontend Documentation -->
        {% if sections %}
        <div class="row g-4 mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header bg-success text-white">
                        <h3 class="card-title text-white mb-0">
                            <i class="fas fa-layer-group me-2"></i>
                            Knowledge Base
                        </h3>
                    </div>
                    <div class="card-body">
                        <div class="row g-3">
                            {% for section in sections %}
                                {% if section.name not in ['Quick Start','General','Architecture','Overview'] %}
                                <div class="col-md-6 col-lg-4">
                                    <div class="card h-100">
                                        <div class="card-header">
                                            <h4 class="card-title h5 mb-0">
                                                <i class="fas fa-folder-open me-2"></i>{{ section.name }}
                                            </h4>
                                        </div>
                                        <div class="list-group list-group-flush">
                                            {% for item in section.items[:6] %}
                                                <a class="list-group-item list-group-item-action" href="{{ url_for('docs.docs_file', filepath=item.relpath) }}">
                                                    <i class="fas fa-file-alt me-2 text-secondary"></i>{{ item.title }}
                                                </a>
                                            {% endfor %}
                                            {% if section.items|length > 6 %}
                                                <div class="list-group-item text-secondary small">
                                                    + {{ section.items|length - 6 }} more
                                                </div>
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                                {% endif %}
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}
    </div>
</div>

<!-- Custom Styles -->

{% endblock %}