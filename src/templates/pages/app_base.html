{% extends "base.html" %}

{% block title %}{{ app_info.app_type|title }} - {{ model|replace('_', ' ')|title }} App {{ app_num }}{% endblock %}

{% block content %}
<div class="container-fluid px-4 py-3">
    <!-- App Header -->
    <div class="app-details-header mb-4">
        <div class="row align-items-center">
            <div class="col-md-8">
                <h1 class="h2 mb-2">{{ app_info.app_type|title }} Application</h1>
                <p class="mb-0 text-muted">{{ model|replace('_', ' ')|title }} â€¢ App {{ app_num }}</p>
            </div>
            <div class="col-md-4 text-md-end">
                <a href="{{ url_for('main.dashboard') }}" class="btn btn-light btn-sm mr-2">
                    <i class="fas fa-arrow-left mr-1"></i>Dashboard
                </a>
                <span class="badge badge-success" id="app-status">
                    <span class="status-indicator status-running"></span>
                    Running
                </span>
            </div>
        </div>
    </div>

    <!-- Sub-page Navigation -->
    <div class="card mb-4">
        <div class="card-body py-2">
            <nav class="nav nav-pills nav-justified">
                <a class="nav-link {% if current_page == 'overview' %}active{% endif %}" 
                   href="{{ url_for('main.app_overview', model=model, app_num=app_num) }}">
                    <i class="fas fa-info-circle mr-2"></i>Overview
                </a>
                <a class="nav-link {% if current_page == 'docker' %}active{% endif %}" 
                   href="{{ url_for('main.app_docker', model=model, app_num=app_num) }}">
                    <i class="fas fa-cube mr-2"></i>Docker Containers
                </a>
                <a class="nav-link {% if current_page == 'analysis' %}active{% endif %}" 
                   href="{{ url_for('main.app_analysis', model=model, app_num=app_num) }}">
                    <i class="fas fa-shield-alt mr-2"></i>Security Analysis
                </a>
                <a class="nav-link {% if current_page == 'performance' %}active{% endif %}" 
                   href="{{ url_for('main.app_performance', model=model, app_num=app_num) }}">
                    <i class="fas fa-tachometer-alt mr-2"></i>Performance
                </a>
                <a class="nav-link {% if current_page == 'files' %}active{% endif %}" 
                   href="{{ url_for('main.app_files', model=model, app_num=app_num) }}">
                    <i class="fas fa-folder mr-2"></i>Files
                </a>
                <a class="nav-link {% if current_page == 'tests' %}active{% endif %}" 
                   href="{{ url_for('main.app_tests', model=model, app_num=app_num) }}">
                    <i class="fas fa-flask mr-2"></i>Tests
                </a>
            </nav>
        </div>
    </div>

    <!-- Page Content -->
    {% block page_content %}{% endblock %}
</div>

<style>
.app-details-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border-radius: 0.5rem;
    padding: 2rem;
    margin-bottom: 2rem;
}

.nav-pills .nav-link {
    border-radius: 0.375rem;
    margin: 0 0.25rem;
    transition: all 0.3s ease;
}

.nav-pills .nav-link:hover {
    background-color: #f8f9fa;
    color: #495057;
}

.nav-pills .nav-link.active {
    background-color: #007bff;
    color: white;
}

.status-indicator {
    display: inline-block;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    margin-right: 0.5rem;
}

.status-running { background-color: #28a745; }
.status-stopped { background-color: #dc3545; }
.status-unknown { background-color: #6c757d; }
</style>
{% endblock %}
