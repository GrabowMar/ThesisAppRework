{# Model Overview Section - Compact Layout #}
<div class="row g-2">
  {# Combined Identity & Status #}
  <div class="col-lg-7">
    <div class="card card-sm h-100">
      <div class="card-body py-2">
        <div class="row g-3">
          {# Identity Column #}
          <div class="col-md-6">
            <div class="d-flex align-items-center mb-2">
              <i class="fas fa-id-badge text-primary me-2" aria-hidden="true"></i>
              <span class="text-muted small text-uppercase fw-bold">Identity</span>
            </div>
            <div class="row row-cols-2 g-2">
              <div class="col">
                <div class="text-muted small">Display Name</div>
                <div class="fw-medium text-truncate" title="{{ model.get('display_name') or model.get('model_name') or enriched_data.get('openrouter_name') or 'Unknown' }}">{{ model.get('display_name') or model.get('model_name') or enriched_data.get('openrouter_name') or 'Unknown' }}</div>
              </div>
              <div class="col">
                <div class="text-muted small">Provider</div>
                <span class="badge bg-primary-lt text-primary">{{ model.get('provider', 'Unknown') }}</span>
              </div>
              <div class="col">
                <div class="text-muted small">Database ID</div>
                <div class="fw-medium">#{{ model.get('id', 'N/A') }}</div>
              </div>
              <div class="col">
                <div class="text-muted small">Status</div>
                <span class="badge {{ 'bg-success-lt text-success' if model.get('installed') else 'bg-secondary-lt' }}">
                  {{ 'Active' if model.get('installed') else 'Available' }}
                </span>
              </div>
            </div>
          </div>
          {# Sync & Stats Column #}
          <div class="col-md-6">
            <div class="d-flex align-items-center mb-2">
              <i class="fas fa-clock text-success me-2" aria-hidden="true"></i>
              <span class="text-muted small text-uppercase fw-bold">Sync & Stats</span>
            </div>
            <div class="row row-cols-2 g-2">
              <div class="col">
                <div class="text-muted small">Last Updated</div>
                <div class="fw-medium">{% if model.get('updated_at') %}{{ model.updated_at.strftime('%Y-%m-%d %H:%M') }}{% else %}—{% endif %}</div>
              </div>
              <div class="col">
                <div class="text-muted small">Linked Apps</div>
                <div class="fw-medium">{{ model.get('apps_count', 0) }}</div>
              </div>
              {% if enriched_data.get('openrouter_canonical_slug') %}
              <div class="col-12">
                <div class="text-muted small">Canonical Slug</div>
                <code class="small text-truncate d-block" title="{{ enriched_data.get('openrouter_canonical_slug') }}">{{ enriched_data.get('openrouter_canonical_slug') }}</code>
              </div>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  {# Capacity Card - Compact #}
  <div class="col-lg-5">
    <div class="card card-sm h-100">
      <div class="card-body py-2">
        <div class="d-flex align-items-center mb-2">
          <i class="fas fa-database text-info me-2" aria-hidden="true"></i>
          <span class="text-muted small text-uppercase fw-bold">Capacity</span>
        </div>
        <div class="row g-2 text-center">
          <div class="col-6">
            <div class="h3 mb-0 text-primary">
              {% if enriched_data.get('openrouter_context_length') %}{{ "{:,}".format(enriched_data.get('openrouter_context_length') // 1000) }}K{% elif model.get('context_window') %}{{ "{:,}".format(model.get('context_window') // 1000) }}K{% else %}—{% endif %}
            </div>
            <div class="text-muted small">Context</div>
          </div>
          <div class="col-6">
            <div class="h3 mb-0 text-success">
              {% if enriched_data.get('top_provider_max_completion_tokens') %}{{ "{:,}".format(enriched_data.get('top_provider_max_completion_tokens') // 1000) }}K{% else %}—{% endif %}
            </div>
            <div class="text-muted small">Max Output</div>
          </div>
        </div>
        <div class="d-flex flex-wrap gap-1 mt-2 justify-content-center">
          {% if model.get('is_free') or enriched_data.get('openrouter_is_free') %}<span class="badge bg-success-lt"><i class="fas fa-gift me-1"></i>Free</span>{% endif %}
          {% if enriched_data.get('top_provider_is_moderated') %}<span class="badge bg-info-lt"><i class="fas fa-shield-alt me-1"></i>Moderated</span>{% endif %}
          {% if model.get('installed') %}<span class="badge bg-primary-lt"><i class="fas fa-download me-1"></i>Installed</span>{% endif %}
        </div>
      </div>
    </div>
  </div>

  {# Description - Only if exists, inline #}
  {% if enriched_data.get('openrouter_description') %}
  <div class="col-12">
    <div class="card card-sm">
      <div class="card-body py-2">
        <div class="d-flex align-items-start">
          <i class="fas fa-file-alt text-warning me-2 mt-1" aria-hidden="true"></i>
          <p class="mb-0 small">{{ enriched_data.get('openrouter_description') }}</p>
        </div>
      </div>
    </div>
  </div>
  {% endif %}

  {# Model Variants - Inline if exists #}
  {% set variants = enriched_data.get('openrouter_variants') %}
  {% if variants %}
  <div class="col-12">
    <div class="card card-sm">
      <div class="card-body py-2">
        <div class="d-flex align-items-center flex-wrap gap-2">
          <span class="text-muted small"><i class="fas fa-layer-group text-purple me-1"></i>Variants:</span>
          {% if variants is iterable and variants is not string %}
            {% for variant in variants %}<span class="badge bg-purple-lt">{{ variant }}</span>{% endfor %}
          {% else %}
            <span class="badge bg-purple-lt">{{ variants }}</span>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
  {% endif %}
</div>