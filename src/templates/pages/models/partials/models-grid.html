{% for m in models %}
<tr>
    <td><input type="checkbox" class="form-check-input m-0 model-checkbox" value="{{ m.slug }}" onchange="toggleModelSelection('{{ m.slug }}')" aria-label="Select"></td>
    <td>
        <div class="d-flex align-items-center">
            <strong>{{ m.name }}</strong>
            {% if m.input_price == 0 and m.output_price == 0 %}
            <span class="badge bg-success ms-2" title="Free"><i class="fa-solid fa-gift"></i></span>
            {% endif %}
            {% if m.apps_count > 0 %}
            <span class="badge bg-info ms-1" title="Has Apps"><i class="fa-solid fa-box"></i></span>
            {% endif %}
        </div>
    </td>
    <td><span class="badge bg-azure text-white">{{ m.provider }}</span></td>
    <td class="text-center">
        {% if 'text' in m.capabilities %}<span class="badge bg-azure text-white me-1" title="Text"><i class="fa-solid fa-font"></i></span>{% endif %}
        {% if 'vision' in m.capabilities or 'image' in m.capabilities %}<span class="badge bg-info text-white me-1" title="Image/Vision"><i class="fa-solid fa-eye"></i></span>{% endif %}
        {% if 'audio' in m.capabilities %}<span class="badge bg-purple text-white me-1" title="Audio"><i class="fa-solid fa-microphone"></i></span>{% endif %}
        {% if 'video' in m.capabilities %}<span class="badge bg-pink text-white me-1" title="Video"><i class="fa-solid fa-video"></i></span>{% endif %}
    </td>
    <td class="text-center">
        {% if m.architecture_tokenizer %}
        <span class="badge bg-secondary-lt" title="{{ m.architecture_tokenizer }}">{{ m.architecture_tokenizer[:6] }}</span>
        {% else %}
        <span class="text-muted small">—</span>
        {% endif %}
    </td>
    <td class="text-center">
        {% if m.architecture_instruct_type %}
        <span class="badge bg-secondary-lt">{{ m.architecture_instruct_type[:4] }}</span>
        {% else %}
        <span class="text-muted small">—</span>
        {% endif %}
    </td>
    <td class="text-end">
        {% if m.input_price == 0 and m.output_price == 0 %}
        <span class="badge bg-success text-white fw-bold">Free</span>
        {% else %}
        <div class="text-nowrap">
            <span class="fw-semibold">${{ "%.2f"|format(m.input_price * 1000) }}</span>
            <span class="text-muted mx-1">/</span>
            <span class="fw-semibold">${{ "%.2f"|format(m.output_price * 1000) }}</span>
        </div>
        {% endif %}
    </td>
    <td class="text-center">
        {% if m.context_length %}
        <span class="badge bg-secondary-lt fw-bold">{{ (m.context_length / 1000)|round|int }}K</span>
        {% else %}
        <span class="text-muted">—</span>
        {% endif %}
    </td>
    <td class="text-center"><span class="text-muted">—</span></td>
    <td class="text-center">
        {% if m.performance_score %}
        <span class="badge bg-secondary-lt">{{ (m.performance_score * 100)|round|int }}%</span>
        {% else %}
        <span class="text-muted">—</span>
        {% endif %}
    </td>
    <td class="text-center">
        <div class="d-flex gap-2 justify-content-center">
            {% if m.capabilities.function_calling %}<i class="fa-solid fa-code text-primary fs-5" title="Function Calling"></i>{% endif %}
            {% if m.capabilities.vision %}<i class="fa-solid fa-eye text-info fs-5" title="Vision"></i>{% endif %}
            {% if m.capabilities.json_mode %}<i class="fa-solid fa-brackets-curly text-success fs-5" title="JSON Mode"></i>{% endif %}
            {% if m.capabilities.streaming %}<i class="fa-solid fa-stream text-warning fs-5" title="Streaming"></i>{% endif %}
        </div>
    </td>
    <td>
        <div class="btn-group btn-group-sm" role="group">
            <button class="btn btn-ghost-primary" onclick="viewModelDetails('{{ m.slug }}')" title="View details">
                <i class="fa-solid fa-eye"></i>
            </button>
            <button class="btn btn-ghost-info" onclick="openOnOpenRouter('{{ m.slug }}')" title="View on OpenRouter">
                <i class="fa-solid fa-external-link-alt"></i>
            </button>
        </div>
    </td>
</tr>
{% else %}
<tr><td colspan="12" class="text-center py-4 text-muted">No models found</td></tr>
{% endfor %}
