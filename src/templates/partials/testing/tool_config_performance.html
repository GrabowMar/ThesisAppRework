<!-- Performance Testing Configuration Panel -->
<div class="tool-config-panel" data-tool-config="performance">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h6 class="mb-0"><i class="fas fa-tachometer-alt me-2"></i>Performance Testing Configuration</h6>
        <span class="badge bg-success">Load Testing</span>
    </div>
    
    <div class="row">
        <!-- Test Type -->
        <div class="col-md-6">
            <div class="mb-3">
                <label for="perf_test_type" class="form-label">Test Type</label>
                <select name="perf_test_type" id="perf_test_type" class="form-select">
                    <option value="load" selected>Load Test</option>
                    <option value="stress">Stress Test</option>
                    <option value="spike">Spike Test</option>
                    <option value="volume">Volume Test</option>
                </select>
                <div class="form-text">Different test types have different user ramp patterns</div>
            </div>
        </div>
        
        <!-- Target URL -->
        <div class="col-md-6">
            <div class="mb-3">
                <label for="perf_target_url" class="form-label">Target URL *</label>
                <input type="url" name="perf_target_url" id="perf_target_url" class="form-control" 
                       placeholder="http://localhost:3000" required>
                <div class="form-text">The application URL to test</div>
            </div>
        </div>
    </div>
    
    <div class="row">
        <!-- Load Configuration -->
        <div class="col-md-4">
            <div class="mb-3">
                <label for="perf_users" class="form-label">Concurrent Users</label>
                <input type="number" name="perf_users" id="perf_users" class="form-control" 
                       min="1" max="1000" value="10">
                <div class="form-text">Number of simulated users</div>
            </div>
        </div>
        
        <div class="col-md-4">
            <div class="mb-3">
                <label for="perf_spawn_rate" class="form-label">Spawn Rate (users/sec)</label>
                <input type="number" name="perf_spawn_rate" id="perf_spawn_rate" class="form-control" 
                       min="0.1" max="100" step="0.1" value="2">
                <div class="form-text">Rate of user spawning</div>
            </div>
        </div>
        
        <div class="col-md-4">
            <div class="mb-3">
                <label for="perf_duration" class="form-label">Duration (seconds)</label>
                <input type="number" name="perf_duration" id="perf_duration" class="form-control" 
                       min="10" max="3600" value="60">
                <div class="form-text">Test duration in seconds</div>
            </div>
        </div>
    </div>
    
    <div class="row">
        <!-- Advanced Options -->
        <div class="col-md-6">
            <div class="form-check">
                <input class="form-check-input" type="checkbox" name="perf_web_ui" id="perf_web_ui" checked>
                <label class="form-check-label" for="perf_web_ui">
                    Enable Web UI
                </label>
                <div class="form-text">Start Locust web interface for monitoring</div>
            </div>
        </div>
        
        <div class="col-md-6">
            <div class="mb-3">
                <label for="perf_output_format" class="form-label">Output Format</label>
                <select name="perf_output_format" id="perf_output_format" class="form-select">
                    <option value="json" selected>JSON</option>
                    <option value="html">HTML</option>
                    <option value="csv">CSV</option>
                </select>
            </div>
        </div>
    </div>
    
    <!-- Custom Headers -->
    <div class="mb-3">
        <label for="perf_custom_headers" class="form-label">Custom Headers</label>
        <textarea name="perf_custom_headers" id="perf_custom_headers" class="form-control" rows="3" 
                  placeholder='{"Authorization": "Bearer token", "Content-Type": "application/json"}'></textarea>
        <div class="form-text">JSON object with custom HTTP headers for requests</div>
    </div>
    
    <!-- Request Patterns -->
    <div class="mb-3">
        <label for="perf_request_patterns" class="form-label">Request Patterns</label>
        <textarea name="perf_request_patterns" id="perf_request_patterns" class="form-control" rows="4" 
                  placeholder="GET /api/users&#10;POST /api/login&#10;GET /api/dashboard&#10;PUT /api/user/1"></textarea>
        <div class="form-text">One request per line (METHOD /path)</div>
    </div>
    
    <!-- Load Distribution -->
    <div class="row">
        <div class="col-md-6">
            <div class="mb-3">
                <label for="perf_ramp_up_time" class="form-label">Ramp-up Time (seconds)</label>
                <input type="number" name="perf_ramp_up_time" id="perf_ramp_up_time" class="form-control" 
                       min="0" value="30">
                <div class="form-text">Time to reach maximum user count</div>
            </div>
        </div>
        
        <div class="col-md-6">
            <div class="mb-3">
                <label for="perf_think_time" class="form-label">Think Time (seconds)</label>
                <input type="number" name="perf_think_time" id="perf_think_time" class="form-control" 
                       min="0" step="0.1" value="1">
                <div class="form-text">Delay between user requests</div>
            </div>
        </div>
    </div>
    
    <!-- Failure Thresholds -->
    <div class="row">
        <div class="col-md-6">
            <div class="mb-3">
                <label for="perf_failure_rate_threshold" class="form-label">Failure Rate Threshold (%)</label>
                <input type="number" name="perf_failure_rate_threshold" id="perf_failure_rate_threshold" 
                       class="form-control" min="0" max="100" value="5">
                <div class="form-text">Test fails if failure rate exceeds this percentage</div>
            </div>
        </div>
        
        <div class="col-md-6">
            <div class="mb-3">
                <label for="perf_response_time_threshold" class="form-label">Response Time Threshold (ms)</label>
                <input type="number" name="perf_response_time_threshold" id="perf_response_time_threshold" 
                       class="form-control" min="0" value="2000">
                <div class="form-text">Test fails if average response time exceeds this</div>
            </div>
        </div>
    </div>
    
    <!-- Test Data -->
    <div class="mb-3">
        <label for="perf_test_data" class="form-label">Test Data (CSV)</label>
        <input type="file" name="perf_test_data" id="perf_test_data" class="form-control" accept=".csv">
        <div class="form-text">Optional: Upload CSV file with test data for parameterized requests</div>
    </div>
    
    <!-- Real-time validation feedback -->
    <div class="validation-feedback" id="performance-validation"></div>
    
    <!-- Dynamic test type adjustments -->
    <script>
        document.getElementById('perf_test_type').addEventListener('change', function() {
            const testType = this.value;
            const usersInput = document.getElementById('perf_users');
            const spawnRateInput = document.getElementById('perf_spawn_rate');
            const durationInput = document.getElementById('perf_duration');
            
            // Adjust defaults based on test type
            switch(testType) {
                case 'load':
                    usersInput.value = 10;
                    spawnRateInput.value = 2;
                    durationInput.value = 60;
                    break;
                case 'stress':
                    usersInput.value = 50;
                    spawnRateInput.value = 5;
                    durationInput.value = 300;
                    break;
                case 'spike':
                    usersInput.value = 100;
                    spawnRateInput.value = 20;
                    durationInput.value = 120;
                    break;
                case 'volume':
                    usersInput.value = 20;
                    spawnRateInput.value = 1;
                    durationInput.value = 1800;
                    break;
            }
        });
    </script>
</div>
