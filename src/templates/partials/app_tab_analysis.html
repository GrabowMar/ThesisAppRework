<div class="analysis-tab">
    <!-- Analysis Controls -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">
                        <i class="fas fa-shield-alt text-primary"></i>
                        Security Analysis
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <!-- Backend Analysis -->
                        <div class="col-lg-6 mb-4">
                            <div class="card border-left-primary h-100">
                                <div class="card-body">
                                    <h6 class="card-title font-weight-bold text-primary">
                                        <i class="fas fa-server"></i> Backend Security
                                    </h6>
                                    <p class="card-text text-muted">
                                        Analyze Flask backend code for security vulnerabilities using bandit, safety, and other tools.
                                    </p>
                                    
                                    <form hx-post="/analysis/backend_security/{{ model }}/{{ app_num }}/run"
                                          hx-target="#backend-results"
                                          hx-indicator="#backend-loading">
                                        
                                        <div class="form-group">
                                            <label class="font-weight-bold">Analysis Tools:</label>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="tools" value="bandit" checked id="backend-bandit">
                                                <label class="form-check-label" for="backend-bandit">
                                                    <strong>Bandit</strong> - Python security linter
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="tools" value="safety" checked id="backend-safety">
                                                <label class="form-check-label" for="backend-safety">
                                                    <strong>Safety</strong> - Dependency vulnerability scanner
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="tools" value="semgrep" id="backend-semgrep">
                                                <label class="form-check-label" for="backend-semgrep">
                                                    <strong>Semgrep</strong> - Static analysis
                                                </label>
                                            </div>
                                        </div>
                                        
                                        <button type="submit" class="btn btn-primary btn-block">
                                            <i class="fas fa-play"></i> Run Backend Analysis
                                            <div id="backend-loading" class="htmx-indicator spinner-border spinner-border-sm ml-2"></div>
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Frontend Analysis -->
                        <div class="col-lg-6 mb-4">
                            <div class="card border-left-success h-100">
                                <div class="card-body">
                                    <h6 class="card-title font-weight-bold text-success">
                                        <i class="fas fa-code"></i> Frontend Security
                                    </h6>
                                    <p class="card-text text-muted">
                                        Analyze React/Vite frontend code for security issues and dependency vulnerabilities.
                                    </p>
                                    
                                    <form hx-post="/analysis/frontend_security/{{ model }}/{{ app_num }}/run"
                                          hx-target="#frontend-results"
                                          hx-indicator="#frontend-loading">
                                        
                                        <div class="form-group">
                                            <label class="font-weight-bold">Analysis Tools:</label>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="tools" value="eslint" checked id="frontend-eslint">
                                                <label class="form-check-label" for="frontend-eslint">
                                                    <strong>ESLint</strong> - JavaScript linter
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="tools" value="npm_audit" checked id="frontend-npm">
                                                <label class="form-check-label" for="frontend-npm">
                                                    <strong>npm audit</strong> - Dependency scanner
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="tools" value="retire" id="frontend-retire">
                                                <label class="form-check-label" for="frontend-retire">
                                                    <strong>Retire.js</strong> - JS library scanner
                                                </label>
                                            </div>
                                        </div>
                                        
                                        <button type="submit" class="btn btn-success btn-block">
                                            <i class="fas fa-play"></i> Run Frontend Analysis
                                            <div id="frontend-loading" class="htmx-indicator spinner-border spinner-border-sm ml-2"></div>
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Analysis Results -->
    <div class="row">
        <!-- Backend Results -->
        <div class="col-lg-6 mb-4">
            <div class="card">
                <div class="card-header">
                    <h6 class="mb-0 font-weight-bold text-primary">
                        <i class="fas fa-server"></i> Backend Analysis Results
                    </h6>
                </div>
                <div class="card-body">
                    <div id="backend-results"
                         hx-get="/analysis/backend_security/{{ model }}/{{ app_num }}"
                         hx-trigger="load">
                        <div class="text-center py-4">
                            <div class="spinner-border text-primary" role="status">
                                <span class="sr-only">Loading...</span>
                            </div>
                            <p class="mt-2 text-muted">Loading backend analysis results...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Frontend Results -->
        <div class="col-lg-6 mb-4">
            <div class="card">
                <div class="card-header">
                    <h6 class="mb-0 font-weight-bold text-success">
                        <i class="fas fa-code"></i> Frontend Analysis Results
                    </h6>
                </div>
                <div class="card-body">
                    <div id="frontend-results"
                         hx-get="/analysis/frontend_security/{{ model }}/{{ app_num }}"
                         hx-trigger="load">
                        <div class="text-center py-4">
                            <div class="spinner-border text-success" role="status">
                                <span class="sr-only">Loading...</span>
                            </div>
                            <p class="mt-2 text-muted">Loading frontend analysis results...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

