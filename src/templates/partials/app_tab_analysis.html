<div class="analysis-tab">
    <!-- Analysis Controls -->
    <div class="analysis-controls">
        <h3>Security Analysis</h3>
        
        <div class="controls-grid">
            <!-- Backend Analysis -->
            <div class="control-card">
                <h4>Backend Security</h4>
                <p>Analyze Flask backend code for security vulnerabilities using bandit, safety, and other tools.</p>
                
                <form hx-post="/analysis/backend_security/{{ model }}/{{ app_num }}/run"
                      hx-target="#backend-results"
                      hx-indicator="#backend-loading">
                    
                    <div class="tool-selection">
                        <label>
                            <input type="checkbox" name="tools" value="bandit" checked>
                            Bandit (Python security linter)
                        </label>
                        <label>
                            <input type="checkbox" name="tools" value="safety" checked>
                            Safety (dependency vulnerability scanner)
                        </label>
                        <label>
                            <input type="checkbox" name="tools" value="semgrep">
                            Semgrep (static analysis)
                        </label>
                    </div>
                    
                    <button type="submit" class="btn-primary">
                        Run Backend Analysis
                        <div id="backend-loading" class="htmx-indicator">⏳</div>
                    </button>
                </form>
            </div>
            
            <!-- Frontend Analysis -->
            <div class="control-card">
                <h4>Frontend Security</h4>
                <p>Analyze React/Vite frontend code for security issues and dependency vulnerabilities.</p>
                
                <form hx-post="/analysis/frontend_security/{{ model }}/{{ app_num }}/run"
                      hx-target="#frontend-results"
                      hx-indicator="#frontend-loading">
                    
                    <div class="tool-selection">
                        <label>
                            <input type="checkbox" name="tools" value="eslint" checked>
                            ESLint (JavaScript linter)
                        </label>
                        <label>
                            <input type="checkbox" name="tools" value="npm_audit" checked>
                            npm audit (dependency scanner)
                        </label>
                        <label>
                            <input type="checkbox" name="tools" value="retire">
                            Retire.js (JS library scanner)
                        </label>
                    </div>
                    
                    <button type="submit" class="btn-primary">
                        Run Frontend Analysis
                        <div id="frontend-loading" class="htmx-indicator">⏳</div>
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Analysis Results -->
    <div class="analysis-results">
        <!-- Backend Results -->
        <div class="results-section">
            <h4>Backend Analysis Results</h4>
            <div id="backend-results"
                 hx-get="/analysis/backend_security/{{ model }}/{{ app_num }}"
                 hx-trigger="load">
                <div class="loading">Loading backend analysis results...</div>
            </div>
        </div>
        
        <!-- Frontend Results -->
        <div class="results-section">
            <h4>Frontend Analysis Results</h4>
            <div id="frontend-results"
                 hx-get="/analysis/frontend_security/{{ model }}/{{ app_num }}"
                 hx-trigger="load">
                <div class="loading">Loading frontend analysis results...</div>
            </div>
        </div>
    </div>
</div>

