<!-- Settings Form Partial -->
<form hx-post="/api/settings" hx-target="#settings-result" hx-swap="innerHTML">
    <div class="form-group">
        <label for="auto_refresh_interval">Auto Refresh Interval (seconds)</label>
        <input type="number" class="form-control" id="auto_refresh_interval" name="auto_refresh_interval" 
               value="{{ settings.auto_refresh_interval or 30 }}" min="5" max="300">
        <small class="form-text text-muted">How often to refresh dynamic content (5-300 seconds)</small>
    </div>
    
    <div class="form-group">
        <label for="items_per_page">Items Per Page</label>
        <select class="form-control" id="items_per_page" name="items_per_page">
            <option value="10" {% if settings.items_per_page == 10 %}selected{% endif %}>10</option>
            <option value="20" {% if settings.items_per_page == 20 %}selected{% endif %}>20</option>
            <option value="50" {% if settings.items_per_page == 50 %}selected{% endif %}>50</option>
            <option value="100" {% if settings.items_per_page == 100 %}selected{% endif %}>100</option>
        </select>
    </div>
    
    <div class="form-group">
        <div class="form-check">
            <input type="checkbox" class="form-check-input" id="enable_notifications" name="enable_notifications"
                   {% if settings.enable_notifications %}checked{% endif %}>
            <label class="form-check-label" for="enable_notifications">
                Enable Notifications
            </label>
        </div>
    </div>
    
    <div class="form-group">
        <div class="form-check">
            <input type="checkbox" class="form-check-input" id="enable_auto_start" name="enable_auto_start"
                   {% if settings.enable_auto_start %}checked{% endif %}>
            <label class="form-check-label" for="enable_auto_start">
                Auto-start containers on page load
            </label>
        </div>
    </div>
    
    <div class="form-group">
        <label for="log_level">Log Level</label>
        <select class="form-control" id="log_level" name="log_level">
            <option value="DEBUG" {% if settings.log_level == 'DEBUG' %}selected{% endif %}>Debug</option>
            <option value="INFO" {% if settings.log_level == 'INFO' %}selected{% endif %}>Info</option>
            <option value="WARNING" {% if settings.log_level == 'WARNING' %}selected{% endif %}>Warning</option>
            <option value="ERROR" {% if settings.log_level == 'ERROR' %}selected{% endif %}>Error</option>
        </select>
    </div>
    
    <div class="form-group">
        <label for="theme">Theme</label>
        <select class="form-control" id="theme" name="theme">
            <option value="auto" {% if settings.theme == 'auto' %}selected{% endif %}>Auto (System)</option>
            <option value="light" {% if settings.theme == 'light' %}selected{% endif %}>Light</option>
            <option value="dark" {% if settings.theme == 'dark' %}selected{% endif %}>Dark</option>
        </select>
    </div>
    
    <div class="form-group">
        <div class="form-check">
            <input type="checkbox" class="form-check-input" id="cache_enabled" name="cache_enabled"
                   {% if settings.cache_enabled %}checked{% endif %}>
            <label class="form-check-label" for="cache_enabled">
                Enable Caching
            </label>
        </div>
    </div>
    
    <div class="form-group">
        <label for="max_concurrent_analyses">Max Concurrent Analyses</label>
        <input type="number" class="form-control" id="max_concurrent_analyses" name="max_concurrent_analyses" 
               value="{{ settings.max_concurrent_analyses or 5 }}" min="1" max="20">
        <small class="form-text text-muted">Maximum number of analyses to run simultaneously</small>
    </div>
    
    <div class="form-group">
        <label>Default Analysis Tools</label>
        <div class="form-check">
            <input type="checkbox" class="form-check-input" id="tool_bandit" name="default_analysis_tools" value="bandit"
                   {% if 'bandit' in settings.default_analysis_tools %}checked{% endif %}>
            <label class="form-check-label" for="tool_bandit">Bandit (Python Security)</label>
        </div>
        <div class="form-check">
            <input type="checkbox" class="form-check-input" id="tool_safety" name="default_analysis_tools" value="safety"
                   {% if 'safety' in settings.default_analysis_tools %}checked{% endif %}>
            <label class="form-check-label" for="tool_safety">Safety (Python Dependencies)</label>
        </div>
        <div class="form-check">
            <input type="checkbox" class="form-check-input" id="tool_eslint" name="default_analysis_tools" value="eslint"
                   {% if 'eslint' in settings.default_analysis_tools %}checked{% endif %}>
            <label class="form-check-label" for="tool_eslint">ESLint (JavaScript)</label>
        </div>
        <div class="form-check">
            <input type="checkbox" class="form-check-input" id="tool_npm_audit" name="default_analysis_tools" value="npm_audit"
                   {% if 'npm_audit' in settings.default_analysis_tools %}checked{% endif %}>
            <label class="form-check-label" for="tool_npm_audit">NPM Audit (Node.js Dependencies)</label>
        </div>
    </div>
    
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
        <button type="submit" class="btn btn-primary">
            <span class="htmx-indicator spinner-border spinner-border-sm mr-2" role="status"></span>
            Save Settings
        </button>
    </div>
</form>

<div id="settings-result" class="mt-3"></div>
