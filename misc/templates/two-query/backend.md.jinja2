# Generate Backend: {{ name }}

**IMPORTANT: Generate the complete code immediately. Do not ask for confirmation or clarification. Output the full app.py code block directly.**

{{ description }}

## App Requirements

### User Features
{% for req in backend_requirements %}
- {{ req }}
{% endfor %}

### Admin Features
{% for req in admin_requirements %}
- {{ req }}
{% endfor %}

## API Specification

{% if api_endpoints %}
### User API Endpoints
{{ api_endpoints }}
{% endif %}

{% if admin_api_endpoints %}
### Admin API Endpoints
{{ admin_api_endpoints }}
{% endif %}

## Data Model
{% if data_model %}
**{{ data_model.name }}**:
{% for field, type in data_model.fields.items() %}
- `{{ field }}`: {{ type }}
{% endfor %}
{% endif %}

## Access Control Rules

**CRITICAL - Follow these exactly:**

1. **Public Read Endpoints** (NO authentication):
   - GET endpoints that list/read data return ALL items to everyone
   - Both anonymous and logged-in users see the SAME data
   - Example: `GET /api/todos` returns all todos, no auth required

2. **Protected Write Endpoints** (@token_required decorator):
   - POST, PUT, DELETE require authentication
   - Use the `@token_required` decorator
   - Example: `POST /api/todos` requires valid JWT token

3. **Admin Endpoints** (@admin_required decorator):
   - All `/api/admin/*` endpoints require admin auth
   - Use the `@admin_required` decorator

## Required Authentication Endpoints

Implement these EXACTLY:

```
POST /api/auth/register
- Request: { "username": "str", "email": "str", "password": "str" }
- Response: { "token": "jwt...", "user": { "id", "username", "email", "is_admin" } }
- Status: 201 on success

POST /api/auth/login
- Request: { "username": "str", "password": "str" }
- Response: { "token": "jwt...", "user": { "id", "username", "email", "is_admin" } }
- Status: 200 on success

GET /api/auth/me (requires @token_required)
- Response: User object without password_hash
- Status: 200 on success

PUT /api/auth/me (requires @token_required)
- Request: { "email": "str" } (optional fields)
- Response: Updated user object
- Status: 200 on success
```

## Technical Requirements

1. **Single File**: Output ONE `app.py` file with ALL code (400-600 lines)
2. **Database**: SQLite at `sqlite:////app/data/app.db`
3. **Password Hashing**: bcrypt with LargeBinary column type
4. **JWT Tokens**: PyJWT with 24-hour expiration
5. **Default Admin**: username=admin, password=admin123, is_admin=True
6. **Health Check**: Both `/api/health` and `/health` endpoints

## Output Format

Generate EXACTLY ONE code block:

```python:app.py
# Complete Flask application
# ALL imports, models, decorators, routes, and initialization in this file
# 400-600 lines of production-ready code
```

**CRITICAL:**
- NO placeholders, NO TODOs, NO "..."
- NO multiple files - everything in ONE app.py
- Every function MUST be fully implemented
- Do NOT ask "Would you like me to continue?" - generate EVERYTHING
