# Generate {{ name }} - Backend

{{ description }}

## Requirements
{% for req in backend_requirements %}
- {{ req }}
{% endfor %}

## What Scaffold Provides
Flask app, CORS, health endpoint, error handlers, Flask 3.0, SQLAlchemy 2.0.25

**Your code merges into the scaffold.**

## Generate These Components

1. Imports (`from flask import request, jsonify`, `from flask_sqlalchemy import SQLAlchemy`)
2. Database instance: `db = SQLAlchemy()`
3. Models (inherit `db.Model`, include `to_dict()` methods)
4. `setup_app(app)` function
5. Routes (`@app.route(...)`)

## Critical Constraints

**Database:**
- Use `'sqlite:///app.db'` (relative path)
- In `setup_app()`: call `db.init_app(app)`, then `db.create_all()` inside `with app.app_context():`

**JSON responses:**
- Lists: `{"items": [...], "total": N, "page": 1, "per_page": 20}`
- Single: `{"id": 1, ...}` 
- Errors: `{"error": "message"}` with status 400/404/500

**Must have:**
- Full CRUD operations
- Input validation, error handling (try/except, rollback)
- Pagination (page, per_page params)
- Models use `.to_dict()` for JSON

**Don't generate:**
- `app = Flask(...)` (scaffold has it)
- `if __name__` block (scaffold has it)

**Output only Python code.**

## Pattern

```python
from flask import request, jsonify
from flask_sqlalchemy import SQLAlchemy

db = SQLAlchemy()

class Item(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(100), nullable=False)
    def to_dict(self):
        return {'id': self.id, 'name': self.name}

def setup_app(app):
    app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///app.db'
    app.config['SQLALCHEMY_TRACK_MODIFICATIONS'] = False
    db.init_app(app)
    with app.app_context():
        db.create_all()

@app.route('/api/items', methods=['GET'])
def list_items():
    items = Item.query.all()
    return jsonify({'items': [i.to_dict() for i in items], 'total': len(items)}), 200
```
